# Depredict SDK API Reference

This page provides an overview of the main classes and methods available in the Depredict SDK.

## DepredictClient

The main entry point for interacting with the Depredict protocol.

```typescript
import DepredictClient from '@endcorp/depredict';

const client = new DepredictClient(connection, adminKey, feeVault);
```

### Properties
- `trade`: Market and trading operations
- `config`: Protocol configuration
- `position`: Position page management and utilities
- `marketCreator`: Market creator lifecycle and updates

---

## Trade Methods

### Market Operations
- `getAllMarkets()`: Get all markets
- `getMarketsByAuthority(authority)`: Get markets created by an authority
- `getMarketById(marketId)`: Get market by ID
- `getMarketByAddress(address)`: Get market by PDA address
- `createMarket(args)`: Create a new market
- `resolveMarket({ marketId, payer, resolutionValue? })`: Resolve a market
- `closeMarket(marketId, payer)`: Close a market and collect remaining liquidity
- `updateMarket(marketId, payer, marketEnd?, marketState?)`: Update a market's end time or state

### Position Operations
- `openPosition(args)`: Open a new position (auto-finds/creates position page)
- `payoutPosition({ marketId, payer, assetId })`: Settle a position and claim payout via compressed NFT

---

## Config Methods

- `createConfig(feeAmount, payer)`: Initialize protocol config
- `getConfig()`: Fetch protocol config
- `updateFee(feeAmount)`: Update fee amount
- `updateFeeVault(newFeeVault)`: Update fee vault address
- `updateAuthority(newAuthority)`: Update config authority
- `closeConfig(payer)`: Close config (if no active markets)

---

## Position Methods

- `findAvailablePageForMarket(marketId, payer)`: Find or create a position page with available slots
- `getAllPositionPagesForMarket(marketId)`: List all position pages and slot usage
- `prunePosition({ marketId, signer, pageIndex, slotIndex })`: Prune a slot (creator-only)
- `closePositionPage({ marketId, signer, pageIndex })`: Close an empty page (creator-only)

---

## Market Types

### Market States
- `ACTIVE`: Market is open for trading
- `ENDED`: Market has ended, no new positions
- `RESOLVING`: Market is being resolved
- `RESOLVED`: Market has been resolved

### Market Types
- `LIVE`: Market starts immediately
- `FUTURE`: Market starts at a future time

### Oracle Types
- `SWITCHBOARD`: Uses Switchboard oracle for resolution
- `MANUAL`: Manual resolution by admin

---

For detailed argument types, see the SDK TypeScript types or the protocol IDL. 